# 全屏视频播放功能说明

## 功能概述

本Android TV浏览器已全面支持网页视频的全屏播放功能，适用于CCTV直播和其他视频网站。

## 全屏功能特性

### ✅ 已实现的功能
1. **自动全屏支持**: WebView自动检测视频播放器的全屏请求
2. **系统UI隐藏**: 全屏时自动隐藏状态栏和导航栏
3. **硬件加速**: 启用GPU加速，提升视频播放性能
4. **自动退出**: 视频结束或用户操作时自动退出全屏
5. **桌面版兼容**: 支持桌面版网页的视频播放器

### 🎯 使用方法

#### 进入全屏模式
1. **自动触发**: 在支持的视频播放器中点击全屏按钮
2. **CCTV网站**: 在CCTV直播页面中，点击播放器的全屏图标
3. **其他网站**: 大多数HTML5视频播放器都支持

#### 退出全屏模式
1. **返回键**: 按遥控器的返回键（Back键）
2. **自动退出**: 视频播放结束时自动退出
3. **触摸操作**: 在全屏视频上点击退出按钮（如果有）

## 技术实现

### WebView配置
- **JavaScript**: 启用JavaScript执行
- **媒体播放**: 禁用用户手势要求，支持自动播放
- **硬件加速**: 启用GPU渲染
- **混合内容**: 允许HTTPS页面加载HTTP视频

### 全屏处理
- **WebChromeClient**: 实现自定义视图回调
- **系统UI控制**: 使用WindowInsetsController管理
- **布局适配**: 动态创建全屏容器

## 故障排除

### 常见问题及解决方案

#### 1. 视频无法全屏
**可能原因**:
- 网站不支持全屏API
- 视频播放器使用了非标准实现

**解决方案**:
- 尝试不同的视频源
- 检查网站是否有特殊的全屏按钮
- 在页面浏览模式下直接点击播放器

#### 2. 全屏后黑屏
**可能原因**:
- 硬件加速问题
- 视频编码不兼容

**解决方案**:
- 重新加载页面
- 尝试其他频道
- 检查网络连接

#### 3. 无法退出全屏
**可能原因**:
- 播放器控件被隐藏
- 系统UI响应问题

**解决方案**:
- 按返回键多次
- 双击返回键退出应用后重启
- 切换到其他频道

#### 4. 音视频不同步
**可能原因**:
- 网络延迟
- 硬件解码问题

**解决方案**:
- 暂停后重新播放
- 刷新页面
- 检查网络质量

## 兼容性说明

### 支持的网站类型
✅ **完全支持**:
- CCTV官方直播页面
- 使用HTML5播放器的网站
- 标准的video标签网站

⚠️ **部分支持**:
- 使用Flash播放器的网站
- 自定义播放器的网站
- 需要特殊插件的网站

❌ **不支持**:
- 需要桌面软件的直播
- DRM保护的内容
- 需要特殊编解码器的视频

## 性能优化建议

1. **网络环境**: 确保WiFi连接稳定
2. **设备性能**: 关闭其他应用释放内存
3. **播放质量**: 选择适合网络的视频质量
4. **缓存清理**: 定期重启应用清理缓存

## 调试信息

在Android Studio的Logcat中搜索以下标签：
- `BrowserWebView`: 全屏进入/退出日志
- `WebView`: WebView相关错误
- `chromium`: Chrome内核相关信息

### 日志示例
```
D/BrowserWebView: Entering fullscreen mode
D/BrowserWebView: Exiting fullscreen mode
```

## 未来改进

计划中的功能：
- [ ] 手动全屏快捷键
- [ ] 画中画模式支持
- [ ] 视频下载功能
- [ ] 播放历史记录 